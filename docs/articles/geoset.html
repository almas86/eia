<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EIA geosets â€¢ eia</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="EIA geosets">
<meta property="og:description" content="">
<meta property="og:image" content="http://leonawicz.github.io/eia/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eia</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="../articles/eia.html">Get Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/categories.html">Categories</a>
    </li>
    <li>
      <a href="../articles/series.html">Time series</a>
    </li>
    <li>
      <a href="../articles/geoset.html">Geosets</a>
    </li>
    <li>
      <a href="../articles/api.html">API details</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/leonawicz/eia">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>EIA geosets</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/leonawicz/eia/blob/master/vignettes/geoset.Rmd"><code>vignettes/geoset.Rmd</code></a></small>
      <div class="hidden name"><code>geoset.Rmd</code></div>

    </div>

    
    
<div id="time-series-by-region" class="section level2">
<h2 class="hasAnchor">
<a href="#time-series-by-region" class="anchor"></a>Time series by region</h2>
<p>Geosets are metadata structures relating series together. Requesting series using the <code>geoset</code> API endpoint is much the same as requesting series data using the <code>series</code> endpoint. Instead of <code>eia_series</code>, use <code>eia_geoset</code>.</p>
<p>The main difference is that you must provide a geoset ID to <code>id</code> and a <code>region</code> argument. Both may be vectors of multiple series and regions. The function returns the combination of time series datasets and regions that exist. The API will not return all geographic entities associated with a geoset. You are required to specify which region(s) you want and they must be associated with the given geoset ID.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(eia)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co"># eia_set_key("yourkey") # set your API key</span></a>
<a class="sourceLine" id="cb1-3" title="3">id &lt;-<span class="st"> "ELEC.GEN.ALL-99.A"</span></a>
<a class="sourceLine" id="cb1-4" title="4">region &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"USA-CA"</span>, <span class="st">"USA-NY"</span>)</a>
<a class="sourceLine" id="cb1-5" title="5">(x &lt;-<span class="st"> </span><span class="kw"><a href="../reference/eia_geoset.html">eia_geoset</a></span>(id[<span class="dv">1</span>], region[<span class="dv">1</span>], <span class="dt">n =</span> <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">#&gt; # A tibble: 1 x 11</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co">#&gt;   geoset_id setname f     units series_id name  region latlon start end  </span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co">#&gt;   &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="co">#&gt; 1 ELEC.GEN~ Net ge~ A     thou~ ELEC.GEN~ Net ~ USA-CA &lt;NA&gt;   2001  2018 </span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co">#&gt; # ... with 1 more variable: data &lt;list&gt;</span></a></code></pre></div>
</div>
<div id="groups-of-regions" class="section level2">
<h2 class="hasAnchor">
<a href="#groups-of-regions" class="anchor"></a>Groups of regions</h2>
<p>If you want data for all fifty states for example, you can set <code>region = "USA"</code>; you do not need to make a vector of all fifty state IDs. However, if you want certain region subsets, there are other options besides making a vector of these values. For example, the <code>eia_geoset</code> accepts shorthand descriptions of specific, popular subsets of states; so popular in fact that their labels ship with R itself in the <code>datasts</code> package.</p>
<p>You can provide simple state abbreviations (without the <code>USA-</code> prefix), state names, and more to the point, US Census regions and divisions. These are two hierarchical sets of US states.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">tibble</span>(state.abb, state.name, state.region, state.division)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="co">#&gt; # A tibble: 50 x 4</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">#&gt;    state.abb state.name  state.region state.division    </span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">#&gt;    &lt;chr&gt;     &lt;chr&gt;       &lt;fct&gt;        &lt;fct&gt;             </span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">#&gt;  1 AL        Alabama     South        East South Central</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#&gt;  2 AK        Alaska      West         Pacific           </span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">#&gt;  3 AZ        Arizona     West         Mountain          </span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">#&gt;  4 AR        Arkansas    South        West South Central</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="co">#&gt;  5 CA        California  West         Pacific           </span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="co">#&gt;  6 CO        Colorado    West         Mountain          </span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="co">#&gt;  7 CT        Connecticut Northeast    New England       </span></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="co">#&gt;  8 DE        Delaware    South        South Atlantic    </span></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="co">#&gt;  9 FL        Florida     South        South Atlantic    </span></a>
<a class="sourceLine" id="cb2-14" title="14"><span class="co">#&gt; 10 GA        Georgia     South        South Atlantic    </span></a>
<a class="sourceLine" id="cb2-15" title="15"><span class="co">#&gt; # ... with 40 more rows</span></a></code></pre></div>
<p>Provide the associated label and <code>eia_geoset</code> recognizes subsets of US states. Even this can be a vector. In the example below, <code>region</code> consists of Alaska plus the states belonging to the New England census division.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">(x &lt;-<span class="st"> </span><span class="kw"><a href="../reference/eia_geoset.html">eia_geoset</a></span>(id, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"AK"</span>, <span class="st">"New England"</span>), <span class="dt">n =</span> <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co">#&gt; # A tibble: 7 x 11</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co">#&gt;   geoset_id setname f     units series_id name  region latlon start end  </span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co">#&gt;   &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co">#&gt; 1 ELEC.GEN~ Net ge~ A     thou~ ELEC.GEN~ Net ~ USA-AK &lt;NA&gt;   2001  2018 </span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#&gt; 2 ELEC.GEN~ Net ge~ A     thou~ ELEC.GEN~ Net ~ USA-CT &lt;NA&gt;   2001  2018 </span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">#&gt; 3 ELEC.GEN~ Net ge~ A     thou~ ELEC.GEN~ Net ~ USA-MA &lt;NA&gt;   2001  2018 </span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">#&gt; 4 ELEC.GEN~ Net ge~ A     thou~ ELEC.GEN~ Net ~ USA-ME &lt;NA&gt;   2001  2018 </span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co">#&gt; 5 ELEC.GEN~ Net ge~ A     thou~ ELEC.GEN~ Net ~ USA-NH &lt;NA&gt;   2001  2018 </span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="co">#&gt; 6 ELEC.GEN~ Net ge~ A     thou~ ELEC.GEN~ Net ~ USA-RI &lt;NA&gt;   2001  2018 </span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">#&gt; 7 ELEC.GEN~ Net ge~ A     thou~ ELEC.GEN~ Net ~ USA-VT &lt;NA&gt;   2001  2018 </span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co">#&gt; # ... with 1 more variable: data &lt;list&gt;</span></a>
<a class="sourceLine" id="cb3-13" title="13">x<span class="op">$</span>data[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb3-14" title="14"><span class="co">#&gt; # A tibble: 1 x 3</span></a>
<a class="sourceLine" id="cb3-15" title="15"><span class="co">#&gt;   value date        year</span></a>
<a class="sourceLine" id="cb3-16" title="16"><span class="co">#&gt;   &lt;dbl&gt; &lt;date&gt;     &lt;int&gt;</span></a>
<a class="sourceLine" id="cb3-17" title="17"><span class="co">#&gt; 1 6515. 2018-01-01  2018</span></a></code></pre></div>
</div>
<div id="relations" class="section level2">
<h2 class="hasAnchor">
<a href="#relations" class="anchor"></a>Relations</h2>
<p>There is also a <code>relation</code> argument that accepts an optional relation ID. If one is provided, <code>eia_geoset</code> will switch to the API <code>relation</code> endpoint. A relation is another metadata structure that applies to geosets and relates summary statistics associated with geoset IDs to their composite statistics. This makes it easier to obtain variables that facet the data, e.g., by sector or fuel type.</p>
<p>The EIA <code>relation</code> API endpoint is officially supported according to the online EIA API documentation, but unfortunately that endpoint does not appear to function at the time of current package release.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#time-series-by-region">Time series by region</a></li>
      <li><a href="#groups-of-regions">Groups of regions</a></li>
      <li><a href="#relations">Relations</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://leonawicz.github.io/">Matthew Leonawicz</a>, <a href="https://www.esource.com/"><img src="https://raw.githubusercontent.com/leonawicz/leonawicz.github.io/master/assets/img/esource_logo.png" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
